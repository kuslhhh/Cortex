generator client {
   provider = "prisma-client-js"
}

datasource db {
   provider = "postgresql"
   url      = env("DATABASE_URL")
}

enum ContentType {
   document
   tweet
   youtube
   link
}

model User {
   id        Int       @id @default(autoincrement())
   username  String    @unique
   password  String
   contents  Content[]
   share     Share?
   createdAt DateTime? @default(now())
   updatedAt DateTime? @updatedAt
}

model Content {
   id          Int         @id @default(autoincrement())
   link        String
   type        ContentType
   title       String
   description String? @default("No description provided")
   tags        Tag[]
   user        User        @relation(fields: [userId], references: [id])
   userId      Int
   createdAt   DateTime?   @default(now())
   updatedAt   DateTime?   @updatedAt

   @@index([userId])
}

model Tag {
   id       Int       @id @default(autoincrement())
   title    String    @unique
   contents Content[]
}

model Share {
   id        Int       @id @default(autoincrement())
   hash      String    @unique
   enabled   Boolean   @default(true)
   user      User      @relation(fields: [userId], references: [id])
   userId    Int       @unique
   createdAt DateTime? @default(now())
}


// model Share {
//   id         Int       @id @default(autoincrement())
//   hash       String    @unique
//   enabled    Boolean   @default(true)
//   user       User?     @relation(fields: [userId], references: [id])
//   userId     Int?
//   content    Content?  @relation(fields: [contentId], references: [id])
//   contentId  Int?
//   createdAt  DateTime? @default(now())

// }
